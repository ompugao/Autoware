<launch>
	 <!--<param name="use_sim_time" value="true" />-->

	<arg name="orb_config" default="$(find orb_localizer)/config/orb-slam2.yaml" />
	<arg name="map_file" default="" />
    <arg name="mask_image" default="$(find orb_localizer)/config/mask.png" />
	<arg name="image_topic" default="/camera/image_raw" />
	<arg name="external_pose_topic" default="/current_pose" />
	<arg name="image_rate" default="10" />
	<arg name="odometry" default="0" />


    <group ns="zed">
        <!-- slow down -->
         <!--<node name="downsample" pkg="topic_tools" type="throttle" args="messages /camera/image_raw $(arg image_rate) /camera/image_raw_d" />-->
        
        <!--
        0 = no process
        1 = gamma adjustment
        2 = to illuminati invariant
        -->
        <!--
        <arg name="processMode" default="1" />

        <node name="imgprocx" pkg="orb_localizer" type="imgprocx" args="$(arg mask_image) $(arg processMode)" output="screen">
            <param name="input_topic" value="/camera/image_raw_d" />
            <param name="output_topic" value="/camera/image_hs" />
        </node>
        -->


        <node name="orb_localmap_publisher" pkg="orb_localizer" type="localmap_publisher" output="screen"
        >
            <param name="map_file"                    value="$(arg map_file)" />
            <param name="configuration_file"          value="$(arg orb_config)" />
            <remap from="~camera/left/image_raw" to="left/image_rect_color"/>
            <remap from="~camera/right/image_raw" to="right/image_rect_color"/>
        </node>
         <!--<node name="framebuffer_view" pkg="rqt_image_view" type="rqt_image_view" args="/zed/orb_stereo_proc/framebuffer" />-->
    </group>

</launch>
